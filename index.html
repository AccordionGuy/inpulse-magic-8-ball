<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Inpulse-magic-8-ball : A &quot;Magic 8-Ball&quot; app for the inPulse smartwatch" />
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Inpulse-magic-8-ball</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Inpulse-magic-8-ball</h1>
          <h2>A Beginner's Tutorial for Programming inPulse Smartwatch Apps</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/AccordionGuy/inpulse-magic-8-ball/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/AccordionGuy/inpulse-magic-8-ball/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/AccordionGuy/inpulse-magic-8-ball" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          
          <h1>Get Started Programming inPulse Smartwatch Apps</h1>
          <p><img src="images/inpulse_watches.jpg" alt="A pair of inPulse watches, one displaying the time, the other displaying the body of an email." /></p>        
          <p><strong>inPulse Magic 8-Ball</strong> is a tutorial for programmers who want to get started developing apps for the <a href="http://getinpulse.com">inPulse smartwatch</a> and who don't have very much experience with C or any experience programming embedded devices. In this tutorial, you'll:</p>
          <ul>
            <li>Download and set up a Linux virtual machine on your computer, in which you'll develop apps and run them in an inPulse watch simulator</li>
            <li>Get comfortable with the development environment and inPulse programming by writing a "Hello, world!" app</li>
            <li>Get a little more inPulse programming practice by writing a a <a href="http://en.wikipedia.org/wiki/Magic_8-Ball">"Magic 8-Ball"</a> app</li>
          </ul>

          <h2>What You'll Need</h2>
          <p>In order to go through this tutorial and build the inPulse Magic 8 Ball app, you'll need the following:</p>
          <p><img src="images/virtualbox_large_icon.jpg" style="float: right; margin: 0 0 10px 20px;" /><strong>A computer that can run Oracle VM VirtualBox 4.1.x.</strong> You'll develop the app and run it in the simulator, all from within a virtual Linux environment, and you'll need Oracle VM VirtualBox to run that virtual Linux environment. If you go to the <a href="http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html">Oracle VM VirtualBox downloads page</a>, you'll see all the operating systems it runs on: Windows 32- and 64-bit, Mac OS X, Solaris 10 and a fair number of Linux distributions (Debian, Fedora, Mandriva, openSUSE, Red Hat Enterprise Linux, SUSE and Ubuntu). Ideally, your computer should have at least 8GB of RAM.</p>
          <p><img src="images/the_c_programming_language.jpg" style="float: right; margin: 0 0 10px 20px;" /><strong>Some programming experience and a little familiarity with the C programming language.</strong> If you've never programmed in C before, don't let the fact that the inPulse is programmed in C scare you off: C programming can be pretty straightforward, and you'll find that many of the concepts from your preferred programming language will apply. If you're familiar with a programming langauge with a similar syntax -- such as C#, Java, JavaScript, Perl or PHP -- you'll find many of the C constructs familiar. If you'd like to learn some C programming, there are many online resources, such as Zed Shaw's <a href="http://c.learncodethehardway.org/book/"><em>Learn C the Hard Way</em></a>.</p>
          <p><strong>That's it!</strong> You won't even need an inPulse smartwatch. In this tutorial, you'll run all the apps in the simulator.</p>
          
          <h2>Setting Up the Development Environment</h2>
          <p>In order to develop apps for the inPulse smartwatch simulator, you'll need to do two things:</p>
          <ul>
            <li><strong>Download and install VirtualBox,</strong> which you'll use to run the virtual machine image.</li>
            <li><strong>Download and uncompress the virtual disk image,</strong> a virtual hard disk containing a complete Linux system that's already been set up with everything you need to start developing inPulse apps. This system will run in its own window as if it were another program running on your computer.</li>
          </ul>
        
          <h3>Download and Install VirtualBox</h3>
          <p>Go to the <a href="http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html">Oracle VM VirtualBox download page</a> , look under the section marked <strong>Oracle VM VirtualBox</strong> for the link for the installer for your computer's operating system and click on it. 
          
          <h4>If You're Running Mac OS</h4>
          <p><strong>If your operating system is Mac OS,</strong> the installer will come in a disk image (.dmg) file. Double-click the installer icon to open the disk image, which will create a virtual disk drive named <strong>VirtualBox</strong> on your desktop. The virtual disk drive should open automatically; if it doesn't, double-click it to see its contents. You should see something like this:</p>
          <p><img src="images/virtualbox_mac_installer_window.jpg"></p>
          <p><img src="images/virtualbox_icon.jpg" style="float: right; margin: 0 0 10px 20px;" />Double-click on the icon marked <strong>VirtualBox.mpkg</strong> to install Oracle VM VirtualBox. Once it's installed, open your <strong>Applications</strong> folder and double-click the VirtualBox icon to launch it.</p>
          
          <h4>If You're Running Windows</h4>
          <p><strong>If your operating system is Windows,</strong> the installer will come as an executable (.exe) file. Double-click on its icon to start the installer, then launch VirtualBox from the <strong>Start</strong> menu.</p>
          
          <h4>If You're Running Linux</h4>
          <p><strong>If your operating system is Linux,</strong> chances are you know what to do with the package format for your particular distribution and how to launch VirtualBox once it's installed. (I'll post a set of instructions for Ubuntu soon.)</p>
        
          <h3>Download and Uncompress the Virtual Disk Image</h3>
          <p><a href="https://s3.amazonaws.com/inpulse_simulator/simulator/inPulseSimulator.rar"><strong>Download the compressed virtual disk image, inPulseSimulator.rar</strong>,</a> then uncompress it. You might need to download a utility to uncompress .rar files, such as <a href="http://itunes.apple.com/app/the-unarchiver/id425424353?mt=12&ls=1">The Unarchiver</a> for Mac OS or <a href="http://www.win-rar.com/">WinRAR</a> or <a href="http://www.7-zip.org/">7-Zip</a> for Windows.</p>
          <p><img src="images/vm_icon.jpg" style="float: right; margin: 0 0 10px 20px;" />The uncompressed file will have the filename <strong>inPulseSimulator.vdi</strong>. Put it in whatever directory you use to store your development work.</p>
          
          <h3>Set Up the Virtual Machine</h3>
          <p><strong>If you haven't done so already, launch VirtualBox.</strong> You should see a window that looks like this:</p>
          <p><img src="images/virtualbox_01.jpg"></p>
          <p>Click <strong>New</strong>. This will start the <strong>New Virtual Machine Wizard</strong>, which walks you through the steps of setting up a virtual machine:</p>
          <p><img src="images/virtualbox_02.jpg"></p>
          <p>Click <strong>Continue</strong>, which takes you to the next step, where you specify what sort of operating system will run in the virtual machine:</p>
          <p><img src="images/virtualbox_03.jpg"></p>
          <p>Do the following:</p>
          <ul>
            <li>Give your virtual machine a name -- I chose <strong>inPulseDev</strong>, but you can name it however you like -- and enter it into the <strong>Name</strong> field.</li>
            <li>For the <strong>Operating System</strong>, select <strong>Linux</strong>.</li>
            <li>For the <strong>Version</strong>, select <strong>Linux 2.6</strong>.</li>
            <li>Click <strong>Continue</strong>.</li>
          </ul>
          <p>You'll be taken to the next step, where you specify the minimum amount of RAM to be allocated to the virtual machine.</p>
          <p><img src="images/virtualbox_04.jpg"></p>
          <p>On my computer, an 8GB MacBook Pro, I gave the virtual machine 4096MB (4GB) of RAM. This setting seems to work well for both the Mac OS host and Linux running in the virtual machine. You can experiment and see if you get acceptable performance from the virtual machine with less RAM.</p>
          <p>Once you've set the amount of RAM to be allocated to the virtual machine, click <strong>Continue</strong>. You'll be taken to the next step, where you set up a virtual hard disk.</p>
          <p><img src="images/virtualbox_05.jpg"></p>
          <p>We want the virtual machine to boot from this virtual disk, so make sure that <strong>Start-up Disk</strong> is checked. The virtual disk image you downloaded earlier is the one we want to use, so:</p>
          <ul>
            <li>Select <strong>Use existing hard disk</strong></li>
            <li>Click on the folder icon, use it to navigate to wherever you stored <strong>inPulseSimulator.vdi</strong> and select it.</li>
            <li>Click <strong>Continue</strong>.
          </ul>
          <p>You'll be taken to the summary page, where you can review the settings you chose:</p>
          <p><img src="images/virtualbox_06.jpg"></p>
          <p>The summary should list the following:</p>
          <ul>
            <li><strong>Name:</strong> <em>Whatever name you gave the virtual machine</em></li>
            <li><strong>OS Type:</strong> Linux 2.6</li>
            <li><strong>Base Memory:</strong> <em>Whatever you allocated -- mine says</em> 4096MB</li>
            <li><strong>Start-up Disk:</strong> inPulseSimulator.vdi (Normal, 10.00GB)</li>
          </ul>
          <p>Click the <strong>Create</strong> button. Your virtual machine will be created, and you'll be returned to the window you saw when you launched VirtualBox, with one notable difference:</p>
          <p><img src="images/virtualbox_07.jpg"></p>
          <p>In the left pane of the window, you'll see the virtual machine you just created.</p>
          
          <h3>Start the Virtual Machine</h3>
          <p>It's time to start the virtual machine to confirm that it works. Click on the virtual machine to make sure it's selected, then click <strong>Start</strong>. The virtual machine will start booting up, just like a hardware machine would, only more quickly. Dismiss any dialog boxes that may appear during the startup process.</p>
          <p>At some point, you should see the Ubuntu logo:</p>
          <p><img src="images/virtualbox_08.jpg"></p>
          <p>...and once the system has booted, you should see something like this:</p>
          <p><img src="images/virtualbox_09.jpg"></p>
          <p>The virtual disk image contains an older, out-of-date version of Ubuntu that isn't supported anymore. Don't let this bother you; this version is perfectly fine for running the development tools and the inPulse simulator.</p>
          <p>Dismiss the dialog box that says "Your Ubuntu release is not supported anymore" and close the Update Manager. You should now have a clear view of the desktop, which has four icons. One of the icons may be on top of another; rearrange the icons so that none of them overlap.</p>
          <p>The desktop should now look something like this:
          <p><img src="images/virtualbox_10.jpg"></p>
          <p><strong>Congratulations!</strong> You've set up the virtual machine and are now ready to start writing inPulse apps.</p>
          <p>Before we start developing apps, let me show you how to shut down the virtual machine.</p>
          
          <h3>Shut Down the Virtual Machine</h3>
          <p>Eventually, you'll want to shut down the virtual machine and work on something else (or get away from the computer entirely). You can do this by simply closing the virtual machine's window. The contents of the window will fade to grey and you'll be prompted with a dialog box:</p>
          <p><img src="images/virtualbox_11.jpg"></p>
          <p>You can choose any of these options; pick the one you prefer and click <strong>OK</strong> to shut down the virtual machine. I prefer the <strong>Save the machine state</strong> option, which "freezes the virtual machine in time". When I start it again, restores the virtual machine to the exact same state as when I "froze it in time", running programs and all.</p>
          
          <h2>Exploring the Development Environment</h2>
          <p><img src="images/explore_01.jpg" /></p>
          <p>You'll find four icons on the desktop of the development environment:</p>
          <p><img src="images/pulse_simulator_icon.jpg" style="float: left; margin: 0 20px 10px 0;"/><strong>pulse_simulator:</strong> A link to the directory containing the files you'll be using to develop apps, as well as some example code. The actual directory is located at <strong>/home/pulsesim/pulse_simulator</strong>. When you start developing inPulse apps, you work in this directory.</p>
          <p><img src="images/getting_started_icon.jpg" style="float: left; margin: 0 20px 10px 0;"/><strong>Getting Started:</strong> A link to inPulse's <a href="http://www.getinpulse.com/simulator/"><em>Getting Started with the inPulse Simulator</em></a> web page. That topic is also covered in this tutorial.</p>
          <p><img src="images/username_password_icon.jpg" style="float: left; margin: 0 20px 10px 0;"/><strong>username+password.txt:</strong> A text file containing the username and password of the <strong>pulsesim</strong> user, which you might need from time to time. The username and password are the same: <strong>pulsesim</strong>.</p>
          <p><img src="images/terminal_icon.jpg" style="float: left; margin: 0 20px 10px 0;"/><strong>Terminal:</strong> A link to the command-line <strong>Terminal</strong> program, which you'll use to compile and run your apps.</p>
          <p>Let's take a closer look at the contents of <strong>pulse_simulator</strong>:</p>
          <p><img src="images/explore_02.jpg" /></p>
          <p>Of these contents, the ones that of the most important to you in the short term are:</p>
          <ul>
            <li><strong>Makefile:</strong> Configures the <strong>make</strong> command, which you'll use to compile inPulse apps.</li>
            <li><strong>src:</strong> The directory for source files. The code you write goes here.</li>
            <li><strong>include:</strong> The directory for the header files that define inPulse's built-in functions and supported data types, which you'll need to <code>include</code> in your source code.</li>
            <li><strong>build:</strong> The directory where your app, once compiled, goes.</li>
            <li><strong>examples:</strong> A directory full of example code that you can use to learn more about inPulse programming.</li>
          </ul>
          
          <h2>Making Sure You Have the Latest Simulator</h2>
          <p>Before we do anything else, we need to make sure that the simulator is up to date. We'll do this by running the <strong>update_simulator</strong> script.</p>
          <p>Open the <strong>Terminal</strong> program. You can do this many ways; one way is to double-click on the <strong>Terminal</strong> icon on the desktop.</p>
          <p>Once <strong>Terminal</strong> is open, get a directory listing by entering the <code>ls</code> command. You should see the following:
<pre><code>pulsesim@ubuntu-desktop:~$ <span class="userinput">ls</span>
Desktop    examples.desktop  Public           update_simulator
Documents  Music             pulse_simulator  Videos
Downloads  Pictures          Templates</code></pre>
          <p>(<strong>Note:</strong> Any time we show you an example from a <strong>Terminal</strong> session, any commands you enter will be show in <code><span class="userinput">green</span></code>.)
          <p>Enter <code>./update_simulator</code> at the prompt. This will run a script that will download the latest versions of the simulator files into the <strong>pulse_simulator</strong> directory (your computer will have to be online). You should see the following:</p>
<pre><code>pulsesim@ubuntu-desktop:~$ <span class="userinput">./update_simulator</span> 
Downloading latest Pulse Simulator
--2012-07-20 15:47:23--  http://www.getinpulse.com/images/pulsesim/pulse_simulator.zip
Resolving www.getinpulse.com... 107.21.230.67
Connecting to www.getinpulse.com|107.21.230.67|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 817048 (798K) [application/zip]
Saving to: `pulse_simulator.zip'

100%[======================================>] 817,048      744K/s   in 1.1s    

2012-07-20 15:47:24 (744 KB/s) - `pulse_simulator.zip' saved [817048/817048]

Archive:  pulse_simulator.zip
replace pulse_simulator/Makefile? [y]es, [n]o, [A]ll, [N]one, [r]ename:</code></pre>
          <p>The script will pause at a prompt where it asks <code>replace pulse_simulator/Makefile? [y]es, [n]o, [A]ll, [N]one, [r]ename:</code>. Enter <code>A</code> for all, since we want all the files to be updated. You'll see a large list of messages announcing files being decompressed and put into their proper directories. When the messages stop and you are returned to the command prompt, the update is complete.</p>

          <h2>Compiling and Running the Sample App</h2>
          <p>Now that we've got the development environment set up, let's see the simulator in action! inPulse have set things up so that there's already a program ready to be compiled and run in the simulator.</p>
          <p>Change to the <strong>pulse_simulator</strong> directory by entering <code>cd pulse_simulator</code> at the command line. Then enter <code>make</code> to compile the code:</p>
<pre><code>pulsesim@ubuntu-desktop:~$ <span class="userinput">cd pulse_simulator/</span>
pulsesim@ubuntu-desktop:~/pulse_simulator$ <span class="userinput">make</span>
gcc -o build/pulse_app  -Iinclude -std=gnu99 -g -Wall lib/obj/main.o -Llib -D PULSE_SIMULATOR -lapp_common -lpulse_os -lpulse_protocol -lpulse_widgets -lgtk-x11-2.0 src/pulse_app.c
src/pulse_app.c: In function ‘main_app_handle_button_down’:
src/pulse_app.c:43: warning: implicit declaration of function ‘pulse_printf’
pulsesim@ubuntu-desktop:~/pulse_simulator$</code></pre>
          <p><strong>make</strong> uses the <strong>Makefile</strong> in this directory as instructions for compiling the source code, which is in the file <strong>pulse_app.c</strong>, which in turn is stored in the <strong>src</strong> directory. The resulting compiled file, <strong>pulse_app</strong>, is put into the <strong>build</strong> directory.</p>
          <p>(Don't worry about the warning issued by the compiler about the <code>implicit declaration of function ‘pulse_printf’</code>; it's the result of a little hack that makes development for the simulator a little easier.)</p>
          <p>We have a compiled app -- let's run it! Enter <code>build/pulse_app</code> at the prompt, and you should see this window appear:</p>
          <p><img src="images/simulator_01.jpg" /></p>
          <p>This app is called the <strong>Falling Box Demo</strong>. It draws a box that constantly falls from the top of the screen. When the box reaches the bottom of the screen, it's brought back to the top. Make a note of the size of the black area where the box is drawn: that's the area of the inPulse display, which is:</p>
          <ul>
            <li>96 pixels wide</li>
            <li>128 pixels high</li>
          </ul>
          <p>The inPulse has a single button on its right side. In the simulator, it's represented by the big button labelled <strong>Button</strong> on the right side of the window.</p> 
          <p>Click <strong>Button</strong>. You'll see something like this:</p>
          <p><img src="images/simulator_02.jpg" /></p>
          <p>The <strong>Button Down</strong> text appeared when you pressed down on the button, and the <strong>Button Up</strong> text appeared when you released it. This suggests that there's an event for each action, which you can use in your own apps.</p>
          <p>Look at <strong>Terminal</strong>. You'll see that it's displaying the following:</p>
<pre><code>Button Down
Button Up
</code></pre>
          <p>The function that prints text to the watch screen also prints to the terminal, which is handy for debugging.</p>
          <p>The simulator also has a menu bar, with two menus labelled <strong>Notifications</strong> and <strong>Hardware</strong>. For now, we're more interested in the menu bar itself, because it's used to simulate the inPulse vibrate function:</p>
          <ul>
            <li><strong>When vibrate is off,</strong> the menu bar is brown.</li>
            <li><strong>When vibrate is on,</strong> the menu bar is blue.</li>
          </ul>
          <p>Once you're done trying out the sample app, stop it. You can do this by either:</p>
          <ul>
            <li>Clicking on the simulator's "close window" button</li>
            <li>Typing <strong>control-C</strong> in <strong>Terminal</strong></li>
          </ul>
            
          <h2>Your First inPulse App: "Hello, World!"</h2>
          
        </section>

        <footer>
          Inpulse-magic-8-ball is maintained by <a href="https://github.com/AccordionGuy">AccordionGuy</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
